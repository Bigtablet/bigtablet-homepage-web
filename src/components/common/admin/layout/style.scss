@use "src/styles/function/flex" as *;
@use "src/styles/typography/mixin" as *;

$sidebar-width: 260px;

/* 루트/페이지 기본 */
.admin {
  min-height: 100dvh; /* 윈도우/데스크톱에서 확실히 풀 높이 */
  background: var(--background-light);
}

/* ── Topbar (모바일 전용) ───────────────────────────────── */
.topbar {
  position: sticky;
  top: 0;
  z-index: 30;
  height: 56px;
  background: var(--background-input);
  border-bottom: 1px solid var(--line-normal);
  padding: 0 16px;
  @include flex-between;

  &__brand {
    color: var(--text-dark);
    text-decoration: none;
    @include SemiBold;
    @include typography(16px);
  }

  &__hamburger {
    appearance: none;
    border: none;
    background: transparent;
    padding: 8px;
    cursor: pointer;
    border-radius: 8px;
    color: var(--text-darkblue);
    @include typography(18px);

    &:hover { background: #f3f4f6; }
  }
}

/* ── Sidebar (모바일: overlay / 데스크톱: fixed full height) ─────── */
.sidebar {
  /* 모바일: 기본 숨김, 토글 시 상단바 아래에 오버레이 */
  display: none;
  position: fixed;
  z-index: 40;
  top: 56px; /* topbar 높이만큼 */
  left: 0;
  width: 80%;
  max-width: $sidebar-width;
  height: calc(100dvh - 56px);
  overflow-y: auto;
  background: var(--background-input);
  border-right: 1px solid var(--line-normal);
  padding: 12px;

  &.is-open { display: block; }

  /* 데스크톱: 항상 표시 + 화면 전체 높이 고정 */
  @media (min-width: 768px) {
    display: block;
    top: 0;
    width: $sidebar-width;
    height: 100dvh; /* 윈도우에서 정확히 풀 커버 */
    border-right: 1px solid var(--line-normal);
    border-radius: 0;
  }

  &__brand {
    display: none;

    @media (min-width: 768px) {
      display: block;
      padding: 16px 8px 12px;

      a {
        color: var(--text-dark);
        text-decoration: none;
        @include SemiBold;
        @include typography(16px);
      }
    }
  }

  &__nav {
    @include flex-column;
    gap: 6px;
    margin-top: 4px;
  }

  &__item {
    @include flex-row;
    gap: 10px;
    padding: 10px 12px;
    border-radius: 12px;
    text-decoration: none;
    color: var(--text-normal);
    transition: background 0.15s ease;
    @include typography(14px);

    &:hover { background: #f3f4f6; }

    &.is-active {
      background: var(--text-dark);
      color: var(--text-light);

      .sidebar__item-icon { opacity: 1; }
    }
  }

  &__item-icon {
    width: 18px;
    text-align: center;
    opacity: .8;
  }

  &__item-label { white-space: nowrap; }

  &__quick {
    margin-top: 12px;
    padding-top: 12px;
    border-top: 1px solid var(--line-normal);
  }

  &__section-title {
    @include typography(12px);
    color: var(--text-sub);
    margin: 0 6px 8px;
  }

  &__actions {
    @include flex-column;
    gap: 8px;
  }
}

/* ── Content: 사이드바 폭만큼 좌측 패딩(데스크톱) ───────────── */
.content {
  padding: 16px;
  min-height: calc(100dvh - 56px); /* 모바일에서 상단바 제외 영역 채움 */

  @media (min-width: 768px) {
    padding: 24px;
    padding-left: calc($sidebar-width + 24px); /* 사이드바 회피 */
    min-height: 100dvh; /* 데스크톱에서도 풀 높이 */
  }
}

/* ── Buttons ─────────────────────────────────────────── */
.btn {
  @include flex-center;
  height: 36px;
  padding: 0 12px;
  border-radius: 12px;
  border: 1px solid var(--line-normal);
  text-decoration: none;
  cursor: pointer;
  background: var(--background-input);
  color: var(--text-normal);
  transition: background 0.15s ease, border-color 0.15s ease;
  @include typography(14px);
  @include Medium;

  &:hover { background: #f9fafb; }

  &--primary {
    background: var(--primary);
    border-color: var(--primary);
    color: var(--text-light);

    &:hover {
      background: var(--primary-hover);
      border-color: var(--primary-hover);
    }
  }

  &--outline {
    background: var(--background-input);
    color: var(--text-normal);

    &:hover { background: #f3f4f6; }
  }
}